-- В этом файле я собрала все запросы, которые я использовала для приведения базы к адекватности, а именно: чтобы айди в разных таблицах были не случайными, а связанными, чтобы некоторые поля смотрелись более адекватно с точки зрения человека

-- далее запросы

-- #1--удаляем айдишки, которые были сгенерированы в filldb без учета уникальности account_id, чтобы ислючить вариант, когда у одного account_id несколько профилей
delete from profile_info where account_id in(1,2,4,5,8,9,10,11,12,13,14,15,16,17,18,19,20,22,23,24,25,27,28,29,32,33,34,36,37,38,39,40,41,42,43,44,45,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,69,70,71,72,73,74,75,76,77,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,99,100,101,102,103,104,105,106,107,109,110,111,112,113,115,116,117,118,119,120,121,122,123,124,126,127,128,129,130,132,134,135,136,137,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,205,206,207,209,210,211,212,213,214,215,216,217,218,220,221,223,224,225,226,227,229,230,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,254,255,256,257,258,259,260,261,262,263,264,265,267,268,269,270,271,272,273,274,275,276,278,279,280,281,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,304,305,308,311,312,313,314,316,317,319,320,321,322,324,325,326,327,328,329,330,331,332,335,336,337,338,339,340,341,342,343,344,345,346,347,348,350,351,352,353,354,355,356,357,358,359,360,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,386,387,388,389,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,424,425,427,429,430,431,433,434,435,436,437,438,439,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,461,462,463,464,465,466,467,468,469,470,471,472,473,475,476,477,478,479,480,482,483,484,485,486,487,488,489,490,491,492,493,494,495,496,497,499,500,501,502,504,505,506,507,508,511,512,513,514,515,516,517,519,520,521,522,523,524,526,527,528,529,530,531,533,534,535,536,537,538,539,540,541,543,544,545,546,548,549,550,551,552,553,554,556,557,558,559,561,562,563,565,566,567,568,569,570,571,572,573,574,575,576,578,579,580,581,582,583,585,587,588,589,591,592,593,595,596,598,599,600,601,602,603,604,605,606,607,609,610,611,612,613,614,615,616,617,618,619,620,622,624,625,626,627,628,629,630,631,632,633,634,636,637,638,639,640,641,642,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,662,664,665,666,667,668,669,670,671,672,674,675,678,681,682,683,684,685,687,688,689,690,692,693,694,695,696,697,698,699,700,701,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,725,726,727,728,729,731,732,733,735,737,738,739,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,760,761,762,763,764,765,766,768,769,770,771,772,773,774,775,776,777,778,779,780,781,782,783,785,786,787,788,789,790,791,792,794,795,796,798,799,800,801,802,803,804,805,806,807,808,809,810,811,812,813,814,816,819,820,821,822,823,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,839,840,843,844,845,846,847,848,849,850,851,852,853,854,855,856,857,859,860,861,862,864,865,866,867,868,869,871,872,873,874,875,876,877,878,880,881,882,883,884,885,886,887,888,889,890,891,892,894,895,896,897,898,899,901,902,903,904,905,906,907,909,910,911,916,917,918,919,920,921,922,923,925,926,927,928,929,930,931,932,933,934,935,936,937,939,940,941,942,943,944,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,972,975,976,977,978,979,980,981,982,983,984,985,986,987,988,989,990,991,992,993,994,995,996,997,998,999,1000,1034,1054,1057,1068,1071,1084,1087,1089,1110,1115,1116,1118,1122,1148,1154,1157,1181,1183,1194,1220,1251,1252,1268,1284,1333,1351,1362,1367,1379,1381,1386,1393,1395,1407,1417,1420,1440,1453,1456,1463,1492,1497,1514,1531,1536,1539,1542,1577,1587,1598,1605,1636,1644,1654,1660,1685,1698,1700,1704,1715,1717,1730,1733,1751,1757,1772,1817,1821,1842,1853,1855,1856,1899,1908,1911,1912,1922,1930,1937,1938,1951,1957,1959,1966,1982,1984,2013,2021,2028,2047,2055,2066,2067,2085,2090,2107,2119,2125,2139,2163,2171,2181,2183,2202,2219,2222,2229,2248,2265,2275,2286,2289,2290,2291,2326,2338,2356,2393,2396,2410,2412,2416,2434,2446,2449,2461,2465,2483,2486,2492,2499,2501,2504,2514,2515,2522,2545,2547,2562,2572,2576,2588,2597,2598,2607,2628,2629,2654,2657,2672,2678,2682,2683,2684,2687,2703,2728,2730,2734,2738,2739,2740,2746,2758,2762,2768,2776,2802,2808,2812,2818,2819,2831,2834,2900,2921,2927,2937,2952,2969,2983,3007,3009,3047,3073,3091,3092,3096,3102,3106,3114,3128,3130,3148,3172,3188,3194,3205,3209,3222,3232,3242,3245,3251,3255,3256,3272,3312,3315,3333,3337,3339,3352,3356,3363,3366,3370,3376,3418,3430,3442,3459,3465,3469,3482,3492,3504,3511,3571,3572,3588,3613,3636,3638,3652,3659,3660,3688,3694,3697,3718,3724,3731,3734,3742,3747,3754,3778,3788,3789,3791,3808,3839,3851,3856,3862,3870,3878,3880,3890,3901,3918,3920,3934,3942,3965,3974,3976,3980,3991,3996,4000,4001,4007,4023,4025,4044,4067,4077,4101,4135,4140,4160,4177,4182,4184,4229,4230,4240,4243,4249,4269,4270,4277,4285,4288,4290,4291,4315,4320,4344,4354,4365,4371,4374,4400,4407,4409,4415,4427,4429,4444,4469,4477,4479,4485,4500,4503,4512,4523,4534,4536,4562,4569,4586,4613,4623,4625,4628,4635,4645,4662,4680,4684,4695,4700,4717,4728,4729,4754,4758,4787,4791,4798,4804,4807,4823,4829,4832,4851,4854,4868,4879,4884,4899,4940,4941,4942,4960,4963,4974,4978,4986,5001,5014,5025,5026,5034,5038,5040,5072,5075,5086,5089,5108,5116,5123,5125,5144,5145,5155,5171,5174,5177,5180,5181,5186,5198,5207,5221,5229,5257,5262,5290,5303,5305,5306,5333,5336,5362,5365,5366,5390,5408,5414,5442,5456,5467,5476,5482,5484,5486,5493,5525,5539,5553,5563,5571,5597,5598,5643,5648,5653,5671,5679,5703,5705,5713,5715,5723,5737,5738,5752,5757,5776,5788,5795,5803,5821,5830,5849,5861,5865,5875,5904,5947,5986,5991,6009,6031,6045,6059,6069,6078,6150,6162,6194,6197,6210,6220,6247,6261,6262,6265,6273,6281,6287,6297,6322,6342,6347,6354,6360,6375,6405,6408,6425,6426,6429,6448,6466,6480,6486,6498,6510,6514,6520,6529,6533,6535,6537,6564,6576,6596,6604,6605,6635,6638,6651,6676,6677,6702,6707,6781,6798,6813,6816,6839,6842,6848,6850,6853,6863,6892,6916,6923,6936,6940,6954,6956,6969,6974,6979,6988,7016,7021,7025,7034,7041,7044,7049,7052,7057,7064,7070,7073,7084,7102,7106,7117,7121,7143,7158,7194,7206,7217,7222,7233,7249,7261,7267,7270,7272,7288,7324,7328,7345,7363,7367,7368,7369,7379,7381,7386,7388,7409,7418,7437,7440,7447,7453,7463,7465,7469,7490,7495,7504,7515,7521,7548,7587,7620,7626,7627,7640,7662,7682,7695,7697,7710,7761,7775,7777,7786,7793,7805,7816,7827,7841,7851,7854,7866,7879,7888,7903,7909,7917,7923,7938,7977,7986,7999,8001,8008,8014,8022,8052,8057,8062,8075,8143,8144,8161,8170,8186,8203,8209,8221,8228,8255,8256,8275,8283,8313,8359,8361,8399,8431,8460,8476,8490,8494,8513,8533,8552,8555,8578,8587,8603,8616,8618,8621,8629,8648,8670,8679,8686,8690,8706,8712,8713,8737,8743,8748,8749,8766,8779,8793,8816,8826,8829,8833,8886,8897,8898,8931,8936,8938,8972,8992,8996,8998,9000,9010,9016,9036,9042,9050,9056,9067,9069,9081,9102,9105,9125,9131,9134,9158,9162,9172,9182,9205,9208,9221,9224,9234,9243,9260,9264,9274,9294,9297,9298,9301,9307,9319,9358,9360,9385,9386,9392,9393,9402,9409,9414,9417,9428,9432,9453,9454,9465,9480,9495,9505,9516,9531,9535,9550,9552,9574,9621,9644,9663,9673,9705,9719,9726,9745,9746,9751,9757,9766,9788,9803,9808,9815,9819,9829,9842,9853,9905,9937,9938,9947,9949,9951,9964,9968,9977,9992);

-- #2--обновляю поле email. Из filldb я получила только домент 2 и 1 уровня, типа gmail.com. А с помощью этого запроса, объединяю имя, фамилию и домент в одну строку.
update account_info set email=concat(lower(first_name),lower(last_name),"@",email);

-- #3--обновляю привзяку город к стране через таблицу с аэропортами
-- таблица с аэропортами home_airports я создавала вручную, сохраняя привязку города к стране, теперь используя эту привязку обновлю таблицу hotels
update hotels set city_id=(select city_id from home_airports where home_airports.country_id=hotels.country_id order by rand() limit 1);

-- #4--обновлю название файлов в таблице photos, добавлю расширение у фотофайлов, с filldb я получила только имена
create temporary table exte (id serial, ext varchar(10));
insert into exte (ext) values ('.gif'),('.jpeg'),('.png');
update photos set file_name=concat(file_name,(select ext from exte order by rand() limit 1));

-- #5-- и последнее. В таблице photos фото привязывается к отзыву и отелю. Данные, которые получились на filldb, нужно добработать. Я проверила, что не совпадают отели и ревью в таблице hotels_reviews. Следующий запрос устраняет эту проблему:
update photos set hotel_id=(select hotel_id from hotels_reviews where photos.hotel_review_id=hotels_reviews.id);

-- Готово! База напонена, можно приступать к составлению запросов
